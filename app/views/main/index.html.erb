<% content_for :head do %>
    <%= stylesheet_link_tag "index.css" %>
<% end %>

<%= hidden_field_tag "page_source", "index" %>

<a name="home"></a>
<div class="header">
    <%= image_tag "main_logo.png", :class => "logo-shake" %>
    <div class="slide-container">
        <div id="wrapper">
            <div id="slider-wrap" class="active">
                <ul id="slider">
                    <% @posts.each_with_index do |post, index| %>
                        <%  
                            case post.pointer_type
                            when "FEATURES"
                                url = "/features/#{post.pointer_id}"
                            when "TREND"
                                url = "/trend/#{post.pointer_id}"
                            when "ON_COURT"
                                url = "/oncourt/#{post.pointer_id}"
                            end
                            case index
                            when 0
                                color = "pink"
                            when 1
                                color = "lightblue"
                            when 2
                                color = "lightgreen"
                            when 3
                                color = "#edc26d"
                            when 4
                                color ="#cb77ea"
                            end
                        %>
                        <li data-color="<%= color %>">
                            <a href="<%= url %>">
                                <div class="slide-filter">
                                    <h3><%= post.title %></h3>
                                </div>
                            </a>
                            <%= image_tag post.image.url %>
                        </li>
                    <% end %> 
                </ul>
                <div class="slide-btns" id="next"><i class="fa fa-arrow-right"></i></div>
                <div class="slide-btns" id="previous"><i class="fa fa-arrow-left"></i></div>
                <div id="pagination-wrap">
                    <ul></ul>
                </div> 
            </div>
        </div>
    </div>
</div>

<div class="main container">
    <div class="row">
        <% @news.each do |news| %>
            <div class="banner-box col-xs-4">
                <div class="new-box">
                    <%  
                        case news.pointer_type
                        when "FEATURES"
                            url = "/features/#{news.pointer_id}"
                        when "TREND"
                            url = "/trend/#{news.pointer_id}"
                        when "ON_COURT"
                            url = "/oncourt/#{news.pointer_id}"
                        end
                    %>
                    <a href="<%= url %>">
                        <%= image_tag news.image.url %>
                        <div class="kicks-filter">
                            <p><%= news.title %></p>
                        </div>
                    </a>
                </div>
            </div>
        <% end %>
    </div>
    
    <!-- maximum should be three only (more will be loaded by ajax) -->
    <% @feeds.each_with_index do |feed, index| %>
        <div class="kicks-box clearfix<%=' last' if index == @feeds.size-1%>">
            <%
                case feed.class.name
                when "FeaturePost"
                  link = "/features/#{feed.id}"
                when "TrendPost"
                    link = "/trend/#{feed.id}"
                when "OnCourtPost"
                  link = "/oncourt/#{feed.id}"
                end
            %>
            <a href="<%= link %>">
              <%= image_tag feed.cover_image.url, :class => "col-xs-12 col-sm-4 kicks-pic" %>
            </a>
            <div class="col-xs-12 col-sm-8 kicks-intro">
                <div class="feed-title"><h3><%= feed.title %></h3></div>
                <hr class="title-divider">
                <div class="kicks-intro-content">
                    <span><%= feed.content[0..300] %>...</span>
                    <a href="<%= link %>">(<%= t("more") %>)</a>
                    <span class="post-date"><%= feed.created_at.strftime("%Y-%m-%d") %></span>
                </div>
            </div>
        </div>
    <% end %>
    <% unless @no_more  %>
        <div class="to-view-more">
            <span><%= t("Click_to_view_more") %></span>
        </div>
    <% end %>
    <%= hidden_field_tag "next_page", "2", :name => nil %>
</div>

<% content_for :end_of_body do %>
   <%= javascript_include_tag "index.js" %>
<% end %>