<style type="text/css">
  body {
    -webkit-text-size-adjust: none;
    -ms-text-size-adjust: none;
  }
  html, body, div, span, applet, object, iframe,
  h1, h2, h3, h4, h5, h6, p, blockquote, pre,
  a, abbr, acronym, address, big, cite, code,
  del, dfn, em, img, ins, kbd, q, s, samp,
  small, strike, strong, sub, sup, tt, var,
  b, u, i, .center,
  dl, dt, dd, ol, ul, li,
  fieldset, form, label, legend,
  table, caption, tbody, tfoot, thead, tr, th, td,
  article, aside, canvas, details, embed,
  figure, figcaption, .footer, header, hgroup,
  menu, nav, output, ruby, section, summary,
  time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    vertical-align: baseline;
  }
  article, aside, details, figcaption, figure,
  footer, header, hgroup, menu, nav, section {
    display: block;
  }
  body {
    line-height: 1;
  }
  ol, ul {
    list-style: none;
  }
  blockquote, q {
    quotes: none;
  }
  blockquote:before,
  blockquote:after,
  q:before,
  q:after {
    content: '';
    content: none;
  }
  table {
    display: table;
    border-spacing: 0;
    border-collapse: collapse;
  }
  table, tr {
    width: 100%;
    max-width: 640px;
  }
  table, tr, td {
    padding: 0;
    text-align: left;
    vertical-align: top;
  }
  td {
    border-collapse: collapse !important
  }
  .spacing-4  { height: 4px }
  .spacing-8  { height: 8px }
  .spacing-12 { height: 12px }
  .spacing-16 { height: 16px }
  .spacing-20 { height: 20px }
  .spacing-24 { height: 24px }
  .spacing-32 { height: 32px }
  .spacing-48 { height: 48px }
  .spacing-56 { height: 56px }
  body, table, h1, h2, h3, h4, h5, h6, p, td {
    color: #333;
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
    font-weight: normal;
    font-size: 15px;
    font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
    word-wrap: normal;
    word-break: normal;
  }
  body {
    padding-bottom: 48px !important;
  }
  .wrapper {
    min-width: 320px;
    margin: auto;
    box-sizing: border-box;
  }
  .section {
    padding: 0 20px;
    max-width: 600px;
  }
  hr {
    height: 1px;
    border: none;
    max-width: 600px;
    border-bottom: 1px solid #E8E8EB;
  }
  h1 {
    color: #000;
    font-size: 48px !important;
    font-weight: 200 !important;
    line-height: 1.2;
  }
  h2 {
    color: #000 !important;
    font-size: 26px !important;
    font-weight: 300;
    padding-bottom: 8px;
    line-height: 1.3;
  }
  h3 {
    color: #000;
    font-size: 19px !important;
    font-weight: 400 !important;
    line-height: 1.3;
  }
  h4 {
    font-size: 15px;
    color: rgba(0,0,0,0.5);
    padding-top: 4px;
  }
  h5 {
    font-weight: 500;
    color: black;
  }
  .header {
    background-color: #f8f8f8;
  }
  .header .center {
    max-width: 600px;
    margin: 0 auto;
    text-align: left;
    padding: 0 20px;
  }
  .header h1,
  .header h2,
  .header p {
    color: #777;
  }
  .header h1 {
    font-family: 'HelveticaNeue-thin', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif !important;
  }
  a {
    color: #28AFFA;
    text-decoration: none;
  }
  a img {
    border: none;
    max-width: 100%;
  }
  p {
    font-size: 15px !important;
    line-height: 1.6 !important;
    max-width: 600px;
  }
  p a {
    border-bottom: 1px solid #AAE1FF;
  }
  p a:hover {
    color: #61C4FC;
  }
  p.intro {
    font-size: 19px !important;
    line-height: 1.6 !important;
    font-weight: 300 !important;
    max-width: 500px;
    font-family: 'HelveticaNeue-Light', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif !important;
  }
  p.subline {
    font-size: 17px !important;
    line-height: 1.5 !important;
  }
  p em {
    font-weight: 600;
    font-style: normal;
  }
  p code {
    font-family: "Roboto Mono", "Lucida Console", Monaco, monospace;
    font-size: 13px;
    font-weight: 500;
    padding: 1px 6px 0;
    margin: 0 1px;
    border: 1px solid #DDD;
    border-radius: 3px;
    color: #19191B;
    white-space: nowrap;
  }
  .button {
    font-weight: 600;
    font-size: 13px !important;
    border-radius: 4px;
    border: none;
    display: inline-block;
  }
  .button-primary {
    background-color: #28affa;
    color: #fff;
    padding: 6px 16px 7px;
  }
  .button-secondary {
    font-weight: 500;
    background-color: #fff;
    padding: 5px 16px 6px;
    color: #28affa;
    border: 1px solid #AAE1FF;
  }
  .banner {
    display: block;
    border: none;
  }
  .banner img {
    max-width: 600px;
    width: 100%;
    border-radius: 5px;
  }
  .meetups {
    width: 100%;
  }
  .meetups-map {
    width: 100%;
    border-radius: 4px;
  }
  .meetups td {
    padding: 10px 0;
    vertical-align: middle;
  }
  .meetups .meetup-thumb,
  .meetups .meetup-thumb img {
    width: 50px;
  }
  .meetups .meetup-info {
    padding-left: 20px;
    padding-right: 10px;
    font-weight: 400;
    width: 100%;
  }
  .meetups .button {
    min-width: 40px;
    text-align: center;
  }
  .articles .article-info {
    padding-left: 24px;
  }
  .articles .article-info p a {
    font-weight: 500;
    color: black;
    display: block;
    text-decoration: none !important;
    border: 0;
    padding-bottom: 8px;
    margin-top: -2px;
  }
  .articles .article-thumb {
    max-width: 120px;
  }
  .articles .article-thumb img {
    max-width: 120px;
  }
  .articles td {
    padding-bottom: 32px;
  }
  .articles .article-info p {
    padding-bottom: 2px;
  }
  .footer {
    text-align: center;
    padding: 0 20px;
  }
  .footer .unsubscribe {
    font-size: 13px !important;
    color: #8B8B8B;
  }
  .footer ul {
    padding-top: 4px;
    padding-bottom: 4px;
  }
  .footer ul li {
    display: inline-block;
    font-size: 13px !important;
    font-weight: 500;
    width: 42px;
    height: 42px;
    padding-right: 10px;
  }
  .footer ul li a {
    padding: 0 6px;
  }
  .footer ul li img {
    width: 100%;
  }
  .unsubscribe-link {
    color: #8B8B8B !important;
    border-color: #E8E8EB;
  }
</style>
<div class="header">
  <div class="center">
    <div class="spacing-56"></div>
    <%= image_tag "nav_logo.png", :class => "logo", :height => "35", :draggable => "false" %>
    <h1>Kicks4Love Newsletter<br>鞋侣 时事通讯</h1>
    <div class="spacing-24"></div>
    <p class="intro">Every week we'll bring you the latest updates<br>每个星期我们会带给你最新信息</p>
    <div class="spacing-56"></div>
  </div>
</div>
<table class="wrapper">
  <tr>
    <td></td>
    <td width="640" align="center">
      <div class="spacing-56"></div>
      <div class="section">
        <h2>What's Hot 有什么火爆的?</h2>
        <div class="spacing-24"></div>
        <% @posts.each do |post| %>
          <%
            case post.pointer_type
            when "FEATURES"
              url = "/features/#{post.pointer_id}"
              pointer_post = FeaturePost.find_by_id(post.pointer_id)
            when "CALENDAR"
              date = CalendarPost.find_by_id(post.pointer_id).release_date.strftime("%Y-%m-%d")
              url = "/calendar?date=#{date}"
              pointer_post = CalendarPost.find_by_id(post.pointer_id)
            when "TREND"
              url = "/trend/#{post.pointer_id}"
              pointer_post = TrendPost.find_by_id(post.pointer_id)
            when "ON_COURT"
              url = "/oncourt/#{post.pointer_id}"
              pointer_post = OnCourtPost.find_by_id(post.pointer_id)
            when "STREET_SNAP"
              url = "/streetsnap/#{post.pointer_id}"
              pointer_post = StreetSnapPost.find_by_id(post.pointer_id)
            else
              url = "/rumors/#{post.pointer_id}"
              pointer_post = RumorPost.find_by_id(post.pointer_id)
            end
          %>
          <a class="banner" href="<%= Rails.configuration.action_mailer.default_url_options[:host] + url %>">
            <%= image_tag pointer_post.cover_image.url, :draggable => false %>
          </a>
          <div class="spacing-32"></div>
          <% if post.pointer_type == "CALENDAR" %>
            <h3><%= pointer_post.title_en %></h3>
            <div class="spacing-8"></div>
            <h3><%= pointer_post.title_cn %></h3>
          <% else %>
            <h3><%= pointer_post.title_en %></h3>
            <div class="spacing-8"></div>
            <p><%= ActionView::Base.full_sanitizer.sanitize(pointer_post.content_en[0])[0..120] %>...</p>
            <div class="spacing-16"></div>
            <h3><%= pointer_post.title_cn %></h3>
            <div class="spacing-8"></div>
            <p><%= ActionView::Base.full_sanitizer.sanitize(pointer_post.content_cn[0])[0..80] %>...</p>
          <% end %>
          <div class="spacing-20"></div>
          <a class="button button-primary" href="<%= Rails.configuration.action_mailer.default_url_options[:host] + url %>">Read more 阅读更多</a>
          <div class="spacing-48"></div>
        <% end %>
        <hr/>
        <div class="spacing-48"></div>
        <div class="section">
          <h2>What's New 有什么新文章?</h2>
          <div class="spacing-24"></div>
          <table class="articles">
            <% @news.each do |news| %>
              <%
                case news.pointer_type
                when "FEATURES"
                  url = "/features/#{news.pointer_id}"
                  pointer_post = FeaturePost.find_by_id(news.pointer_id)
                when "CALENDAR"
                  date = CalendarPost.find_by_id(news.pointer_id).release_date.strftime("%Y-%m-%d")
                  url = "/calendar?date=#{date}"
                  pointer_post = CalendarPost.find_by_id(news.pointer_id)
                when "TREND"
                  url = "/trend/#{news.pointer_id}"
                  pointer_post = TrendPost.find_by_id(news.pointer_id)
                when "ON_COURT"
                  url = "/oncourt/#{news.pointer_id}"
                  pointer_post = OnCourtPost.find_by_id(news.pointer_id)
                when "STREET_SNAP"
                  url = "/streetsnap/#{news.pointer_id}"
                  pointer_post = StreetSnapPost.find_by_id(news.pointer_id)
                else
                  url = "/rumors/#{news.pointer_id}"
                  pointer_post = RumorPost.find_by_id(news.pointer_id)
                end
              %>
            <tr>
              <td class="article-thumb">
                <%= image_tag pointer_post.cover_image.url %>
              </td>
              <td class="article-info">
                <p><a href="<%= Rails.configuration.action_mailer.default_url_options[:host] + url %>"><%= pointer_post.title_en %><br><%= pointer_post.title_cn %></a><%= ActionView::Base.full_sanitizer.sanitize(pointer_post.content_en[0])[0..60] %>...<br><%= ActionView::Base.full_sanitizer.sanitize(pointer_post.content_cn[0])[0..30] %>...</p>
                <div class="spacing-8"></div>
                <a class="button button-primary" href="<%= Rails.configuration.action_mailer.default_url_options[:host] + url %>">Read more 阅读更多</a>
              </td>
            </tr>
          <% end %>
          </table>
      </div> 
      <div class="spacing-48"></div>
      <hr/>
      <div class="spacing-48"></div>
      <div class="footer">
        <p class="unsubscribe">You received this email because you indicated that you&rsquo;d like to receive occasional updates from Kicks4Love. If you don&rsquo;t want to receive these emails in the future, please <a href="<%= contact_us_url %>" class="unsubscribe-link">contact us</a> to unsubscribe.<br>你收到这份邮件因为你订阅了Kicks4Love的每周更新服务。如果您未来不想再收到，请<a href="<%= contact_us_url %>" class="unsubscribe-link">联系客服</a>。</p>
        <div class="spacing-32"></div>
        <ul>
          <li>
            <a href="<%= Rails.application.config.social_media[:facebook] %>">
              <img src="https://cdn0.iconfinder.com/data/icons/free-social-media-set/24/facebook-64.png"/>
            </a>
          </li>
          <li>
            <a href="<%= Rails.application.config.social_media[:weibo] %>">
              <img src="https://cdn0.iconfinder.com/data/icons/free-social-media-set/24/weibo-64.png"/>
            </a>
          </li>
          <li>
            <a href="<%= Rails.application.config.social_media[:instagram] %>">
              <img src="https://cdn0.iconfinder.com/data/icons/free-social-media-set/24/instagram-64.png"/>
            </a>
          </li>
        </ul>
        <div class="spacing-24"></div>
      </div>
    </td>
  </tr>
</table>